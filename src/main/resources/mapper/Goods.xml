<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tardybird.goodsinfo.mapper.GoodsMapper">
    <!--<resultMap id="" type="">-->
        <!--<result property="" column=""/>-->

    <!--</resultMap>-->
    <select id="getGoodsByGoodsSn" resultType="com.tardybird.goodsinfo.domain.Goods">
        select * from goods where good_sn=#{nameSn}
    </select>
    
    <select id="getGoodsByName" resultType="com.tardybird.goodsinfo.domain.Goods">
        select * from goods where name=#{name}
    </select>

    <select id="getGoodsById" resultType="com.tardybird.goodsinfo.domain.Goods">
        select * from goods where id=#{id}
    </select>

    <insert id="createGoods" parameterType="com.tardybird.goodsinfo.domain.Goods" useGeneratedKeys="true" keyProperty="id">
        insert into goods(name,gmt_create,gmt_modified,good_sn,short_name,share_url,description,detail,brief,pic_url,status,share_url,gallery,goods_category_ids,brand_id,is_deleted,weight,volume,special_freight_id,is_special)
        values(#{name},current_timestamp ,current_timestamp ,#{nameSn},#{shortName},#{shareUrl},#{description},#{detail},#{brief},#{picUrl},#{status},#{shareUrl},#{gallery},#{goodsCategoryIds},#{brandId},#{beDeleted},#{weight},#{volume},#{specialFreightId},#{beSpecial})

    </insert>

    <update id="updateGoods" parameterType="com.tardybird.goodsinfo.domain.Goods">
        update goods
        <set>
            <if test="status != null">
                status=#{status}
            </if>
            <if test="description != null">
                description=#{description}
            </if>
            <if test="detail != null">
                detail=#{detail}
            </if>
            <if test="beDeleted != null">
                beDeleted=#{beDeleted}
            </if>
            gmt_modified=current_timestamp
        </set>
    </update>

    <update id="deleteGoods" parameterType="com.tardybird.goodsinfo.domain.Goods">
        update goods
        set is_deleted= 1
        where id=#{id}
    </update>


</mapper>